
/*! tiny-fuse stub (compatible subset) */
(function(global){
  function TinyFuse(list, opts){ this._list=list||[]; this._keys=(opts&&opts.keys)||[]; }
  TinyFuse.prototype.search = function(q){
    q = (q||'').toLowerCase().trim();
    if (!q) return this._list.map(it=>({ item: it, score: 0 }));
    return this._list.map(it=>{
      const hay = this._keys.map(k=>{
        const v = k.split('.').reduce((o,kk)=>o?o[kk]:undefined, it);
        return Array.isArray(v)?v.join(' '):(v||'');
      }).join(' ').toLowerCase();
      const idx = hay.indexOf(q);
      return { item: it, score: idx===-1?1:Math.min(0.99,0.01*idx) };
    }).filter(r=>r.score<1).sort((a,b)=>a.score-b.score);
  };
  global.Fuse = TinyFuse;
})(window);
